<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å£½å¸é¤æ¡Œç¦®å„€å®Œæ•´äº’å‹•æ¨¡æ“¬</title>
  <style>
    body {
      font-family: "Noto Sans TC", sans-serif;
      background: url('images/bg_japan.png') no-repeat center center fixed;
      background-size: cover;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 960px;
      margin: auto;
      padding: 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: white;
    }
    h1, h2 {
      text-align: center;
      color: #d35400;
    }
    .table-area {
      position: relative;
      width: min(60vw, 60vh);
      height: min(60vw, 60vh);
      margin: 20px auto 0 auto;
      border: 2px solid #ccc;
      border-radius: 12px;
      background: url('images/mat_japan.png') no-repeat center center;
      background-size: cover;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .dropzone {
      position: absolute;
      width: 140px;
      height: 140px;
      border: 2px dashed #aaa;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 12px;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      font-size: 14px;
      transform: translate(-50%, -50%);
    }
    .item {
      width: 140px;
      height: 140px;
      border-radius: 10px;
      overflow: hidden;
      cursor: grab;
    }
    .item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .floating-items {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    .feedback {
      text-align: center;
      margin-top: 20px;
      font-weight: bold;
      color: #2c3e50;
      white-space: pre-wrap;
    }
    .complete-message {
      text-align: center;
      color: green;
      font-weight: bold;
      font-size: 20px;
      margin-top: 20px;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>å£½å¸é¤æ¡Œç¦®å„€å®Œæ•´äº’å‹•æ¨¡æ“¬</h1>
    <h2>æ‹–æ›³ç‰©å“åˆ°æ­£ç¢ºé¤æ¡Œä½ç½®</h2>

    <div class="floating-items">
      <div class="item" id="sushi" draggable="true"><img src="images/sushi.png" alt="å£½å¸"></div>
      <div class="item" id="soy" draggable="true"><img src="images/soy.png" alt="é†¬æ²¹ç¢Ÿ"></div>
      <div class="item" id="ginger" draggable="true"><img src="images/ginger.png" alt="é†ƒè–‘ç‰‡"></div>
      <div class="item" id="chopsticks" draggable="true"><img src="images/chopsticks.png" alt="ç­·å­"></div>
      <div class="item" id="miso" draggable="true"><img src="images/miso.png" alt="å‘³å™Œæ¹¯"></div>
    </div>

    <div class="table-area">
      <div class="dropzone" data-accept="sushi" style="top: 50%; left: 50%;"></div>
      <div class="dropzone" data-accept="soy" style="top: 50%; left: 80%;"></div>
      <div class="dropzone" data-accept="ginger" style="top: 20%; left: 50%;"></div>
      <div class="dropzone" data-accept="chopsticks" style="top: 85%; left: 50%;"></div>
      <div class="dropzone" data-accept="miso" style="top: 70%; left: 80%;"></div>
    </div>

    <div class="feedback" id="feedback"></div>
    <div class="complete-message" id="completeMessage">ğŸ‰ å…¨éƒ¨æ­£ç¢ºå®Œæˆï¼æ‚¨å·²æˆåŠŸå®Œæˆå£½å¸é¤æ¡Œæ“ºè¨­ã€‚</div>
    <audio id="sound-correct" src="https://www.soundjay.com/button/sounds/button-3.mp3"></audio>
    <audio id="sound-complete" src="https://www.soundjay.com/human/sounds/applause-8.mp3"></audio>

    <script>
      const items = document.querySelectorAll('.item');
      const dropzones = document.querySelectorAll('.dropzone');
      const feedback = document.getElementById('feedback');
      const completeMessage = document.getElementById('completeMessage');
      const soundCorrect = document.getElementById('sound-correct');
      const soundComplete = document.getElementById('sound-complete');
      let correctCount = 0;

      const culturalFeedback = {
        sushi: 'å£½å¸æ‡‰æ“ºåœ¨æ¡Œé¢ä¸­å¤®ï¼Œè±¡å¾µä¸»è§’ï¼Œæ–¹ä¾¿å…±äº«èˆ‡æ¬£è³ã€‚',
        soy: 'é†¬æ²¹ç¢Ÿæ‡‰æ”¾åœ¨å³å´ï¼Œè®“é­šè‚‰è¼•æ²¾ï¼Œä¸è®“ç±³é£¯å¸é†¬ã€‚',
        ginger: 'é†ƒè–‘ç‰‡é€šå¸¸æ”¾ä¸Šæ–¹ï¼Œç”¨ä¾†æ¸…å£å‘³ï¼Œä¸èˆ‡å£½å¸åŒåƒã€‚',
        chopsticks: 'ç­·å­æ©«æ”¾åœ¨é¤æ¡Œä¸‹æ–¹ï¼Œä¸æ’å…¥é£¯ä¸­ï¼Œä»¥å…èª¤ç”¨å–ªç¦®ç¿’ä¿—ã€‚',
        miso: 'å‘³å™Œæ¹¯æ‡‰æ”¾æ–¼å³æ‰‹å´å‰æ–¹ï¼Œæ–¹ä¾¿å³æ‰‹ç«¯èµ·é£²ç”¨ã€‚'
      };

      items.forEach(item => {
        item.addEventListener('dragstart', e => {
          e.dataTransfer.setData('text/plain', item.id);
        });
      });

      dropzones.forEach(zone => {
        zone.addEventListener('dragover', e => {
          e.preventDefault();
        });
        zone.addEventListener('drop', e => {
          e.preventDefault();
          const draggedId = e.dataTransfer.getData('text/plain');
          const acceptId = zone.getAttribute('data-accept');

          if (draggedId === acceptId) {
            const draggedEl = document.getElementById(draggedId);
            zone.innerHTML = '';
            zone.appendChild(draggedEl);
            draggedEl.setAttribute('draggable', 'false');
            feedback.textContent = `âœ… æˆåŠŸæ”¾ç½®ã€Œ${draggedId}ã€ï¼\n${culturalFeedback[draggedId]}`;
            soundCorrect.play();
            correctCount++;

            if (correctCount === 5) {
              completeMessage.style.display = 'block';
              soundComplete.play();
            }
          } else {
            feedback.textContent = `âŒã€Œ${draggedId}ã€æ”¾éŒ¯ä½ç½®äº†ï¼Œè«‹å†è§€å¯Ÿæ—¥å¼é¤æ¡Œä½ç½®å–”ã€‚`;
          }
        });
      });
    </script>
  </div>
</body>
</html>
